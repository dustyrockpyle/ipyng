debug: &debug Yes
https: No
static_url: &static_url "/"
port: 9000
port2: 8000

paths:
    root: &root '../' 
    client: &client !join [*root, client/]
    build: &build !join [*root, build/]
    static: *build
    vendor: &vendor !join [*root, gulp/vendor/]
    index: !join [*build, ipyng/index.html]

lint:
    - !join [*client, "**/*.js"]

karma:
    browsers:
        - Chrome
    frameworks:
        - jasmine
    reporters:
        - dots
    reportSlowerThan: 100

apps:
    ipyng:
        less:
            watch:
                - !join [*client, ipyng/**/*.less]
                - !join [*client, base.less]
            template: !join [*client, base.less]
            vars:
                static_url: *static_url
                icon-font-path: !join [*static_url, fonts/]
            globs:
                - !join [*client, "ipyng/**/*.less"]
            includes:
                - bootstrap.less
            paths:
                - !join [*vendor, bootstrap/less]
            dest: !join [*build, ipyng/styles.css]
        karma:
            files:
                - !join [*build, angular/angular.js]
                - !join [*build, "**/*.js"]
                - !join [*vendor, angular-mocks/angular-mocks.js]
                - !join [*client, "ipyng/**/*.spec.js"]
        tpl:
            src:
                - !join [*client, ipyng/**/*.tpl.html]
            dest: !join [*build, ipyng/ipyng.tpl.js]

    test:
        html:
            scripts: &scripts2 !flatten
                - !prepend
                    - !join [*vendor, "@()"]
                    - angular/angular.js
                    - lodash/dist/lodash.js
                    - angular-bootstrap/ui-bootstrap-tpls.js
                    - codemirror/lib/codemirror.js
                    - codemirror/mode/python/python.js
                    - angular-ui-codemirror/ui-codemirror.js
                - !join [*client, "@()ng-lodash/ng-lodash.js"]
                - !join [*client, "@()ipyng/**/*.js"]
                - !join [*client, "@()test/**/*.js"]
                - !join ["!", *client, "**/*.spec.js"]
            watch: !flatten
                - !join [*client, test/**/*.js]
                - !join [*client, base.html]
                - !join [*client, test/index.html]
                - *scripts2
            template: !join [*client, test/index.html]
            static_url: "http://localhost:9000/"
            includes:
                - ipyng/ipyng.tpl.js
                - codemirror/lib/codemirror.css
                - test/styles.css
            dest: !join [*build, test/index.html]
        less:
            watch:
                - !join [*client, ipyng/**/*.less]
                - !join [*client, base.less]
            template: !join [*client, base.less]
            vars:
                static_url: *static_url
                icon-font-path: !join [*static_url, fonts/]
            globs:
                - !join [*client, "ipyng/**/*.less"]
            includes:
                - bootstrap.less
            paths:
                - !join [*vendor, bootstrap/less]
            dest: !join [*build, test/styles.css]
        copy:
            src:
                - !join [*vendor, bootstrap/fonts/*.*]
                - !join [*vendor, "@()codemirror/lib/codemirror.css"]
            dest:
                - !join [*build, fonts/]
                - *build